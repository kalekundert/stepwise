test_presets:
  -
    presets:
      -
        a:
          x: 1

    expected:
      a:
        x: 1
  -
    presets:
      -
        a:
          x: 1
          y: 1
          z: 1
        b:
          inherit: a
          y: 2
          z: 2
        c:
          inherit: b
          z: 3

    expected:
      a:
        x: 1
        y: 1
        z: 1
      b:
        x: 1
        y: 2
        z: 2
      c:
        x: 1
        y: 2
        z: 3

  -
    presets:
      -
        a:
          x: 1
          y: 1
      -
        b:
          inherit: a
          y: 2

    expected:
      a:
        x: 1
        y: 1
      b:
        x: 1
        y: 2
  -
    presets:
      -
        a:
          inherit: b
          y: 1
      -
        b:
          x: 2
          y: 2

    expected:
      a:
        x: 2
        y: 1
      b:
        x: 2
        y: 2
  -
    presets:
      -
        a:
          x: 1
          y: 1
      -
        a:
          x: 2
          y: 2
        b:
          inherit: a
          y: 3

    expected:
      a:
        x: 1
        y: 1
      b:
        x: 1
        y: 3
  -
    presets:
      -
        a:
          x: 1
          y: 1
          z: 1
        b:
          inherit: a
          y: 2
          z: 2
      -
        b:
          x: 3
          y: 3
          z: 3
        c:
          inherit: b
          z: 4

    expected:
      a:
        x: 1
        y: 1
        z: 1
      b:
        x: 1
        y: 2
        z: 2
      c:
        x: 1
        y: 2
        z: 4
  -
    presets:
      -
        a:
          inherit: a
          y: 1
      -
        a:
          x: 2
          y: 2

    expected:
      a:
        x: 2
        y: 1

test_presets_err:
  -
    presets:
      -
        a:
          x: 1

    key: 'b'
    error:
      type: KeyError
      message: no preset 'b', did you mean 'a'

  -
    presets:
      -
        a:
          x: 1
    key: 1
    error:
      type: KeyError
      message: no preset 1, did you mean 'a'
